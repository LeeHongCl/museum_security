# museum_security
스마트 미술 관리 시스템

1. 주제 선정 이유

- 원격제어와 자동화적인 기능이 많이 생기고 있는 현대 사회에서 미술작품을 효율적으로 관리하고 미술관 내부의 경비 및 관리 인력을 줄이기 위하여 고안한 시스템

-  스마트 미술 관리 시스템이 없으면 온습도에 예민한 미술작품을 관리하기 위해서 사람이 직접 측정된 온습도의 수치를 보고 제어를 해야함
또한, 경비 측면에서도 언제 일어날지 모르는 위험상황을 상시 대비해야하는 단점을 해결하기 위함

2. 주요 기능

IPC(Inter-Process Communication)
- 서버측인 라즈베리파이와 클라이언트측인 노트북 간의 데이터 교환을 위해서 클라이언트 - 서버 모델을 사용함
- 기존에는 블루투스를 사용하려고 했지만 블루투스는 데이터 교환의 범위가 좁은 관계로 폐기
- 데이터 교환의 범위를 더 넓게 통신하기 위해서 IPC를 활용함

I2C SPI 통신
- 미술품에 부착된 가속도 센서와 라즈베리파이 사이에 통신을 위한 통신 규격
- 하나의 라즈베리파이에서 제어를 하는 관계로 두 방식의 통신을 사용하였음

멀티 쓰레드
- 여러 클라이언트의 연결을 동시에 처리할 수 있도록 하기 위해서 쓰레드를 추가함

- 주 쓰레드 : 클라이언트와의 연결을 처리하기 위함
- 센서 쓰레드 : 온습도 센서 및 가속도 센서의 데이터를 읽기 위함
- 제어 쓰레드 : 가속도 센서로부터 측정된 값을 통해 서보모터와 LED를 제어하기 위함
- 알람 쓰레드 : 스피커를 통해서 경고음 재생

3. 시스템 구조

온습도 측정 시스템
- 미술관 내부에 전시되어 있는 미술작품들은 온습도에 민감하기 때문에 일정 값 이상의 변화가 생기면 미술작품 품질에 이상이 생긴다 그렇기에 특정 온도와 습도의 범위를 넘어서면 경고문이 관리자에게 전달되어서 빠른 조치를 할 수 있도록 하기 위함

경비 시스템
- 경비 인력이 없는 스마트 미술관이다보니 경비 시스템에 매우 민감함
- 미술작품 도난 방지를 위해서 각 미술작품마다 가속도센서를 부착하고 미술작품 도난이 의심되는 정도로 움직일 시 관리자에게 경고문을 발송하고 LED와 스피커를 통한 위험상황을 알리고 서보모터를 통해서 출입문이 폐쇄되도록 하여 도난 방지함

4.  문제점

- IPC를 활용해서 서버-클라이언트 모델을 사용할 때, 다른 네트워크 상의 기기를 연결하려고 할 때, 오류가 발생함
=> 다른 네트워크를 이용하여 연결을 하려고 하면 학교 와이파이의 설정을 변경해야하는데 보안상 문제로 학교 와이파이 설정이 안됨
=> 그 결과 같은 네트워크 상에 연결되어있는 기기 간의 정보 전달 방식으로 변경

- 하나의 라즈베리파이에 여러 센서들을 연결하다보니 여러개의 가속도 센서를 연결할 수가 없음
=> 가속도 센서를 I2C와 SPI 방식으로 하나씩 연결하기로 함
=> 서로 다른 방식으로 연결된 2개의 가속도 센서를 이용해서 미술작품 도난 방지 시스템을 구축함

- 라즈베리파이에 너무 많은 센서들을 연결하다보니 저전압 문제 발생으로 인한 스피커 연결 실패
=> 저전압 문제로 인해 SD 카드 3개 손상
=> 스피커 추가 구현 시 SD 카드 추가 손상 발생 위험으로 인한 중단

5. 향후 계획
- 소켓통신을 할 때, 같은 네트워크가 아닌 다른 네트워크 상에서도 서버- 클라이언트 모델의 소켓통신이 가능하게 구현을 할 예정임
- 스피커 연결로 인한 저전압 문제를 해결하고 스피커를 연결하여 경고음을 올바르게 출력하도록 수정 할 예정임
- 여러개의 라즈베리파이를 이용해서 센서들을 추가적으로 연결하여 더 많은 미술품들을 관리 할 수 있도록 수정 할 예정임
- 시간적 제한때문에 구현하지 못 했던 카메라와 리모콘을 통한 여러 동작들을 독립적으로도 관리 할 수 있도록 수정 할 예정임
- 온습도 센서를 단순한 상시 감지 시스템 뿐만 아닌 실제로 온습도 센서가 감지하는 값에 따라 온도 습도를 변화하게 만들어주는 시스템을 고안 할 예정임

6. 개발 코드




7. 중요 코드 설명
(1) 온습도 센서 데이터 읽기 (read_dht_data)
온습도 센서에서 데이터를 읽고 이를 처리하는 코드는 미술작품 보존을 위한 핵심 기능입니다. 일정 범위를 벗어난 온도와 습도를 감지하여 경고 메시지를 전송함으로써 작품의 손상을 방지합니다.

(2) 가속도 센서 데이터 읽기
SPI 방식 (readRegister_ADXL345_SPI): ADXL345를 SPI 통신으로 제어하여 도난을 감지합니다.
I2C 방식 (readADXL345_I2C): 추가적인 가속도 센서를 I2C 방식으로 연결하여 복합적인 도난 감지 시스템을 구현하였습니다.

(3) 멀티 쓰레드 구조
센서 데이터 처리, 클라이언트 연결, 제어 및 알람 출력이 독립적인 쓰레드로 실행되도록 설계하여, 시스템의 실시간 처리 성능을 강화하였습니다.

(4) 서버-클라이언트 모델
라즈베리파이를 서버로, 노트북을 클라이언트로 설정하여 IPC 방식으로 데이터를 교환하였습니다. 이를 통해 관리자에게 실시간으로 경고와 데이터를 전송합니다.

(5) 서보모터동작 함수
전역변수로 미리 지정해 놓은 서보모터 각도를 통해 프로그램이 실행이 되었을때 자동으로 문이 열려있는 초기 상태로 초기화 시켜주고 도난이 감지 되었을때 문을 닫아주는 상태로 서보모터를 제어합니다.




8. 느낀점     

 IPC를 통한 서버-클라이언트 통신에서 네트워크 설정 문제로 어려움을 겪었지만, 이를 같은 네트워크 내에서 통신으로 변경하는 해결책을 찾았고, 또한, 가속도 센서와 라즈베리파이의 연결 문제를 해결하기 위해 I2C와 SPI 방식을 병행하여 설계하면서 복합적인 회로구성으로 문제 해결 능력을 향상시킨 경험이었습니다.
저전압 문제로 인해 스피커 구현이 중단된 것은 아쉬운 부분이었지만, 이로 인해 하드웨어 설계에서 전력 관리의 중요성을 배울 수 있었습니다. 저전압 이슈로 인해 라즈베리파이가 3번이나 먹통이 되는 과정에서 코드를 항상 백업하고 회로도 또한 그때그때 기록을 하게되면서 개발과정에서 백업이라는 행위가 얼마나 필수적이고 중요한 것 인지 다시한번 느끼게 되었습니다.
개발 과정에서 팀원들과의 협업과 소통이 프로젝트의 성공에 얼마나 중요한지를 깨닫게 되었습니다. 각자의 의견을 공유하고 문제를 함께 해결하는 과정에서 팀워크를 느낄 수 있었습니다.

